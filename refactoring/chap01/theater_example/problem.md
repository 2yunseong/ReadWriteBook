# Refactoring Chap01 예제 실습 정리

- 작성한 파일은 `example01.js` 로 저장한다. 
- 원래는 json을 이용하여 하지만, 편의상 `statement.js` 에 이용할 데이터를 객체로 적어 두었다. 책의 데이터 예시를 조금 변경하였다.
- 문제의 기능을 작은 단위로 나누고 변경할 때 마다 테스트를 하고 커밋을 날리자.

### ❓ 문제 1 : statement() 에서 switch 문을 별도의 함수로 분리해서 다시 작성하시오.

아래의 과정을 밟으며 함수를 추출해보자.

1. 전체 메서드의 동작을 각각의 부분으로 나눌 수 있는 지점을 찾는다.
   - 코드를 분석해야만 무엇을 하는 코드인지 아는 코드
2. 분리하려는 코드가 하는 일에 걸맞는 이름 지어주기
3. 별도 함수로 빼냈을 때 유효 범위를 벗어나는 변수가 있는지 확인
    - 변경 되지 않는 값은 매개변수로 전달
    - 값이 바뀌는 변수는 조심해서 다뤄야 한다.
4. **추출하고 나면 지금보다 명확하게 표현할 수 있는 간단한 방법은 없는지 검토.**

### ❓ 문제 2 : statement에서 불필요한 임시변수를 바꾸어 보자.

임시변수는 함수 추출을 복잡하게 해 리팩터링을 어렵게 하는 원인이다. 이를 위해 문제1에 이어서 불필요한 임시변수를 제거해보자. 필요하다면 비즈니스 로직을 함수로 분리해도 좋다.

분리하는 과정에서 함수명을 어떻게 지으면 좋을까? 그 함수의 **핵심기능**이 무엇인지 고민해보고, 그 느낌을 살릴 수 있는 이름으로 지어야 한다.

**🔍 hint.**
- 임시 변수를 질의 함수로 변경
- 변수 인라인 하기
  
### ❓ 문제 3 : 반복문 쪼개기

어느 정도 리팩터링이 완료 되었다. 눈에 보이는 반복문이 있다. 이를 쪼개어서 분리해보자.

**🔍 hint.**
1. 반복문이 하는 일이 두 가지 이상 일 경우, 분리하자.
2. 변수 초기화 문장을 변수 값 누적 코드 바로 앞으로 옮긴다.
3. 한가지 로직을 수행할 수 있도록 분리한다.
4. 별도 함수로 추출한다.
5. 임시 변수를 질의함수로 바꾼다.
6. 변수를 인라인한다.

